const _validFileExtensions=[".jpg",".jpeg",".png"],fileWarning=document.getElementById("fileWarning");function requiredFileCount(e,i){return e>0?e>i?(fileWarning.innerHTML=`Ən çoxu ${i} fayl yükləməyinizə icazə verilir!`,!1):e<i&&(fileWarning.innerHTML=`Daha ${i-e} fayl yükləməyiniz tələb olunur!`,!0):(fileWarning.innerHTML=`${i} fayl yükləməyiniz tələb olunur!`,!1)}function selectedFileCount(e,i,n){return n>i||n>i&&n===i?(fileWarning.innerHTML=`Ən çoxu ${i} fayl yükləməyinizə icazə verilir!`,!1):n<i?(fileWarning.innerHTML=`Ən çoxu ${i-n} fayl yükləməyinizə icazə verilir!`,!0):n===i&&(fileWarning.innerHTML="",!0)}function imagePreview(e,i){const n=document.querySelector(".fileList");if(e){const t=new FileReader;t.addEventListener("load",(function(){const e=`<div class="col-md-3">\n                                  <div class="single-image-container">\n                                    <div class="car-overlay">\n                                        <button><i class="fas fa-search-plus"></i></button>\n                                        <a data-fileId="${i}" href="#" class="delete-btn removeFile"><i class="fas fa-trash-alt"></i></a>\n                                    </div>\n                                    <img src="${this.result}" alt="Image Preview">\n                                </div>\n                            </div>`;n.insertAdjacentHTML("beforeend",e)})),t.readAsDataURL(e)}}function isValidFileType(e){const i=e.name;let n=!1;for(let e=0;e<_validFileExtensions.length;e++){const t=_validFileExtensions[e];if(i.substr(i.length-t.length,t.length).toLowerCase()===t.toLowerCase()){n=!0;break}}return!!n||(fileWarning.innerHTML=`Bağışlayın, ${i} etibarsızdır, icazə verilən uzantılar: ${_validFileExtensions.join(", ")}`,!1)}$.fn.fileUploader=function(e,i){var n=0;return this.closest(".files").change((function(t){const l=t.target.files.length;if(selectedFileCount(l,4,e.length)){for(let a=0;a<l;a++){const l=t.target.files[a];if(isValidFileType(l)){n++;const t=i+n;e.push({id:t,file:l}),imagePreview(l,t)}}requiredFileCount(e.length,4)}t.target.value=null})),this.closest(".files").on("click",".removeFile",(function(i){i.preventDefault();const n=$(this).parent().children("a").data("fileid");for(let i=0;i<e.length;++i)if(e[i].id===n){e.splice(i,1);break}$(this).parent().parent().parent().remove(),requiredFileCount(e.length,4)})),this.clear=function(){for(let n=0;n<e.length;++n)e[n].id.indexOf(i)>=0&&e.splice(n,1);$(this).children(".fileList").empty()},this},function(){var e=[];$("#CarPhotos").fileUploader(e,"CarPhotos");$("#saveButton").click((function(){const i=new FormData;for(var n=0,t=e.length;n<t;n++)i.append("files",e[n].file)}))}();